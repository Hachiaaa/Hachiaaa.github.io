---
layout: post
title: "JSæ¢³ç†ä¹‹äº‹ä»¶"
date: 2020-05-15
sitemap: false
keywords: "blog"
description: "ğŸš€"
---

äº‹ä»¶å¤„ç†

## EventTargetæ¥å£
* addEventListener(type,listener,useCapture) ç¬¬ä¸‰ä¸ªå‚æ•°è¿˜å¯ä»¥æ˜¯ä¸€ä¸ªå±æ€§é…ç½®å¯¹è±¡ï¼Œæ¯”å¦‚{once:true}
* removeEventListener()
* dispatchEvent()

## äº‹ä»¶æ¨¡å‹
* HTML on-å±æ€§ï¼Œåªä¼šåœ¨å†’æ³¡é˜¶æ®µè§¦å‘
* å…ƒç´ èŠ‚ç‚¹çš„äº‹ä»¶å±æ€§ï¼Œonclickç­‰ï¼Œåªä¼šåœ¨å†’æ³¡é˜¶æ®µè§¦å‘
* ç›‘å¬å‡½æ•°thisæŒ‡å‘è§¦å‘äº‹ä»¶çš„èŠ‚ç‚¹

addEventListenerä¼˜åŠ¿
* åŒä¸€äº‹ä»¶æ·»åŠ å¤šä¸ªç›‘å¬å‡½æ•°
* å¯ä»¥æŒ‡å®šåœ¨å†’æ³¡é˜¶æ®µæˆ–è€…æ•è·é˜¶æ®µè§¦å‘

äº‹ä»¶ä¼ æ’­æ¨¡å‹
* capture phase
* target phase
* bubbling phase

é˜»æ­¢äº‹ä»¶ä¼ æ’­
* stopPropagation(),äº‹ä»¶åˆ°æŸä¸ªèŠ‚ç‚¹ä¸ºæ­¢ï¼Œä¸å†ä¼ æ’­
* stopImmediatePropagation(),å½»åº•å–æ¶ˆè¯¥äº‹ä»¶ï¼Œä¸å†è§¦å‘åé¢æ‰€æœ‰ç›‘å¬è¯¥äº‹ä»¶çš„ç›‘å¬å‡½æ•°

## Eventå¯¹è±¡
* Event.target,äº‹ä»¶çš„åŸå§‹è§¦å‘èŠ‚ç‚¹
* Event.currentTarget,äº‹ä»¶å½“å‰ç»è¿‡çš„èŠ‚ç‚¹
* Event.preventDefault(),å–æ¶ˆæµè§ˆå™¨å¯¹å½“å‰äº‹ä»¶çš„é»˜è®¤è¡Œä¸ºï¼Œæ¯”å¦‚ç‚¹å‡»é“¾æ¥è·³è½¬ï¼ŒæŒ‰ä¸‹ç©ºæ ¼å‘ä¸‹æ»šåŠ¨ã€‚
* Event.composedPath(),è¿”å›ä¸€ä¸ªæ•°ç»„ï¼Œæˆå‘˜æ˜¯äº‹ä»¶çš„æœ€åº•å±‚èŠ‚ç‚¹å’Œä¾æ¬¡å†’æ³¡ç»è¿‡çš„æ‰€æœ‰ä¸Šå±‚èŠ‚ç‚¹ã€‚

## é¼ æ ‡äº‹ä»¶
* MouseEvent.clientX,MouseEvent.clientY,é¼ æ ‡ç›¸å¯¹äºæµè§ˆå™¨çª—å£å·¦ä¸Šè§’çš„åæ ‡
* MouseEvent.screenX,MouseEvent.screenY,é¼ æ ‡ç›¸å¯¹äºå±å¹•å·¦ä¸Šè§’çš„åæ ‡
* MouseEvent.offsetX,MouseEvent.offsetY,é¼ æ ‡ç›¸å¯¹äºèŠ‚ç‚¹paddingè¾¹ç¼˜å·¦ä¸Šè§’çš„åæ ‡

## é”®ç›˜äº‹ä»¶
> äº‹ä»¶çš„è§¦å‘é¡ºåºä¸ºkeydown=>keypress=>keyupï¼Œå¦‚æœä¸€ç›´è¿ç»­æŒ‰é”®ä¸æ¾ï¼Œåˆ™keydownå’Œkeypressè¿ç»­è§¦å‘ï¼Œkeypressä¸»è¦æ˜¯æŒ‰ä¸‹æœ‰å€¼é”®æ‰ä¼šè§¦å‘(ä¸åŒ…æ‹¬Ctrl,Alt,Shift,Metaè¿™æ ·çš„é”®)

ç»„åˆé”®çš„ç›‘å¬
```javascript
window.addEventListener('keydown',function(e){
    if(e.ctrlKey){
        switch(e.keyCode){
            case 37:
                console.log('left')
                break
            case 38:
                console.log('up')
                break
            case 39:
                console.log('right')
                break
            case 40:
                console.log('down')
                break
            default   
        }
    }
})
```

## è¿›åº¦äº‹ä»¶
* abort å¤–éƒ¨èµ„æºç»ˆæ­¢åŠ è½½è§¦å‘
* error ç”±äºé”™è¯¯å¯¼è‡´å¤–éƒ¨èµ„æºæ— æ³•åŠ è½½æ—¶è§¦å‘
* load
* loadend
* progress å¤–éƒ¨èµ„æºåŠ è½½è¿‡ç¨‹ä¸­ä¸æ–­è§¦å‘
* timeout åŠ è½½è¶…æ—¶æ—¶è§¦å‘

> èµ„æºä¸‹è½½ï¼Œæ–‡ä»¶ä¸Šä¼ éƒ½å…·æœ‰è¿™äº›äº‹ä»¶

## è¡¨å•äº‹ä»¶
* input è¡¨å•çš„å€¼å‘ç”Ÿå˜åŒ–æ—¶è§¦å‘,åŒæ—¶æ‰“å¼€äº†contenteditableå±æ€§çš„å…ƒç´ ï¼Œå€¼å‘ç”Ÿæ”¹å˜ä¹Ÿä¼šè§¦å‘
* change è·Ÿinputå¾ˆåƒï¼Œä¸åŒçš„æ˜¯changeåªä¼šåœ¨å…ƒç´ å¤±å»ç„¦ç‚¹æ—¶è§¦å‘
* select åœ¨è¡¨å•é‡Œé€‰ä¸­æ–‡æœ¬è§¦å‘
* invalid è¡¨å•æ ¡éªŒä¸é€šè¿‡è§¦å‘
* reset è¡¨å•é‡ç½®è§¦å‘
* submit æäº¤è¡¨å•è§¦å‘

InputEventæ¥å£
* data è¿”å›è¡¨ç¤ºå˜åŠ¨çš„å†…å®¹
* inputType å­—ç¬¦ä¸²å‘ç”Ÿå˜æ›´çš„ç±»å‹
* dataTransfer è¿”å›ä¸€ä¸ªDataTransferå®ä¾‹ï¼Œè¯¥å±æ€§åªåœ¨æ–‡æœ¬æ¡†æ¥å—ç²˜è´´å†…å®¹ï¼ˆinsertFromPasteï¼‰æˆ–æ‹–æ‹½å†…å®¹ï¼ˆinsertFromDropï¼‰æ—¶æ‰æœ‰æ•ˆã€‚

## è§¦æ‘¸äº‹ä»¶
* Touchæ¥å£ï¼Œå•ä¸ªè§¦æ‘¸ç‚¹
* TouchListæ¥å£ï¼Œå¤šä¸ªè§¦æ‘¸ç‚¹

TouchEventæ¥å£
* touches  æ‰€æœ‰ä»å¤„äºæ´»åŠ¨çŠ¶æ€çš„è§¦æ‘¸ç‚¹
* targetTouches æ‰€æœ‰ç›®æ ‡èŠ‚ç‚¹å†…çš„è§¦æ‘¸ç‚¹
* changedTouches  è¿”å›ä¸€ä¸ªTouchList,è¡¨ç¤ºæœ¬æ¬¡è§¦æ‘¸äº‹ä»¶çš„ç›¸å…³è§¦æ‘¸ç‚¹

è§¦æ‘¸äº‹ä»¶ç§ç±»
* touchstart
* touchmove
* touchend
* touchcancel è§¦æ‘¸ç‚¹å–æ¶ˆæ—¶è§¦å‘ï¼Œæ¯”å¦‚ç”¨æˆ·è§¦æ‘¸ç‚¹å¤ªå¤šè¶…è¿‡ä¸Šé™ï¼Œåˆ™ä¼šè‡ªåŠ¨å–æ¶ˆæ—©å…ˆçš„è§¦æ‘¸ç‚¹

## æ‹–æ‹‰äº‹ä»¶
è¢«æ‹–æ‹‰å…ƒç´ çš„äº‹ä»¶
* drag
* dragstart  targetå±æ€§æŒ‡å‘è¢«æ‹–æ‹‰çš„èŠ‚ç‚¹
* dragend

ç›®æ ‡æ‹–æ‹‰å…ƒç´ çš„äº‹ä»¶
* dragenter
* dragover
* dragleave
* drop

DataTransferæ¥å£
> æ‰€æœ‰æ‹–æ‹‰äº‹ä»¶çš„å®ä¾‹éƒ½æœ‰ä¸€ä¸ªDragEvent.dataTransfer,ç”¨æ¥è¯»å†™éœ€è¦ä¼ é€’çš„æ•°æ®ã€‚

## å…¶ä»–å¸¸è§äº‹ä»¶
* load,error,abort  èµ„æºåŠ è½½ï¼Œé”™è¯¯ï¼Œä¸­æ­¢
* hashchagne  URLçš„hashéƒ¨åˆ†å‘ç”Ÿå˜åŒ–
* DOMContentLoaded,ç½‘é¡µä¸‹è½½å¹¶è§£æå®Œæˆï¼Œå¤–éƒ¨èµ„æºå¯èƒ½è¿˜æ²¡ä¸‹è½½å®Œæˆï¼Œæ¯”loadäº‹ä»¶æ—©
* readystatechange
* scroll
* resize
* fullscreenchange,fullscreenerror
* cut,copy,paste å‰ªè´´æ¿äº‹ä»¶
* focus,blur ç„¦ç‚¹äº‹ä»¶ï¼Œä¸ä¼šå†’æ³¡ã€‚




