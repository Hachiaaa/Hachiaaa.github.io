---
layout: post
title: "è¯¦è§£Reactç”Ÿå‘½å‘¨æœŸ"
date: 2020-10-17
sitemap: false
keywords: "blog"
description: "ğŸš€"
---

Reactç”Ÿå‘½å‘¨æœŸï¼ˆåŒ…æ‹¬hooksï¼‰

React v16.0å‰çš„ç”Ÿå‘½å‘¨æœŸ  
1.ç»„ä»¶åˆå§‹åŒ–é˜¶æ®µï¼ˆinitializationï¼‰
è°ƒç”¨constructorï¼Œæ³¨å…¥çˆ¶ç»„ä»¶çš„propsï¼Œåˆå§‹åŒ–state

2.ç»„ä»¶æŒ‚è½½é˜¶æ®µï¼ˆmountingï¼‰
> æ­¤é˜¶æ®µåˆ†ä¸ºcomponentWillMount,render,componentDidMount

* componentWillMount,ç»„ä»¶æŒ‚è½½åˆ°DOMå‰è°ƒç”¨ï¼Œä¸”åªä¼šè¢«è°ƒç”¨ä¸€æ¬¡ï¼Œå¯ä»¥æå‰åˆ°constructorï¼Œå¾ˆå°‘ä½¿ç”¨

* renderï¼Œæ ¹æ®ç»„ä»¶çš„propså’Œstateï¼Œreturnä¸€ä¸ªReactå…ƒç´ 

* componentDidMountï¼Œç»„ä»¶æŒ‚è½½åˆ°DOMåè°ƒç”¨ï¼Œä¸”åªä¼šè¢«è°ƒç”¨ä¸€æ¬¡

3.ç»„ä»¶æ›´æ–°é˜¶æ®µï¼ˆupdateï¼‰
> reactç»„ä»¶æ›´æ–°æœºåˆ¶ï¼ŒsetStateå¼•èµ·çš„stateæ›´æ–°æˆ–è€…çˆ¶ç»„ä»¶é‡æ–°renderå¼•èµ·çš„propsæ›´æ–°ï¼Œæ›´æ–°åçš„stateå’Œpropsç›¸å¯¹ä¹‹å‰æ— è®ºæ˜¯å¦æœ‰å˜åŒ–ï¼Œéƒ½å°†å¼•èµ·å­ç»„ä»¶çš„é‡æ–°renderã€‚

> æ­¤é˜¶æ®µåˆ†ä¸ºcomponentWillReceiveProps,shouldComponentUpdate,componentWillUpdate,render,componentDidUpdate

* componentWillReceiveProps(nextProps),å¯ä»¥å¯¹æ¯”å‰åpropsæ˜¯å¦å‘ç”Ÿæ”¹å˜ï¼Œå¦‚æœå‘ç”Ÿæ”¹å˜æ‰§è¡Œçš„ä¸œè¥¿ï¼Œæ¯”å¦‚setState

* shouldComponentUpdate(nextProps,nextState),è¯¥æ–¹æ³•é€šè¿‡å‰åpropsï¼Œstateçš„æ¯”è¾ƒï¼Œè¿”å›trueå°†ç»§ç»­æ‰§è¡Œæ›´æ–°è¿‡ç¨‹ï¼Œè¿”å›falseåˆ™å½“å‰ç»„ä»¶æ›´æ–°åœæ­¢ã€‚ä»¥æ­¤æ¥å‡å°‘ä¸å¿…è¦çš„æ¸²æŸ“
> è¿™è¾¹ä¹Ÿå¯ä»¥çœ‹å‡ºï¼Œå°±ç®—componentWillReceiveProps()ä¸­æ‰§è¡Œäº†this.setStateï¼Œæ›´æ–°äº†stateï¼Œä½†åœ¨renderå‰ï¼ˆå¦‚shouldComponentUpdateï¼ŒcomponentWillUpdateï¼‰ï¼Œthis.stateä¾ç„¶æŒ‡å‘æ›´æ–°å‰çš„stateï¼Œä¸ç„¶nextStateåŠå½“å‰ç»„ä»¶çš„this.stateçš„å¯¹æ¯”å°±ä¸€ç›´æ˜¯trueäº†ã€‚

* componentWillUpdate(nextProps,nextState),åœ¨renderè°ƒç”¨å‰æ‰§è¡Œï¼Œè¿™ä¸€æ­¥ä¸èƒ½æ›´æ”¹stateï¼Œå¦åˆ™ä¼šé€ æˆæ­»å¾ªç¯ã€‚

* componentDidUpdate(prevProps,prevState),æ­¤æ–¹æ³•åœ¨æ›´æ–°åè°ƒç”¨ï¼Œå¯ä»¥æ“ä½œç»„ä»¶æ›´æ–°çš„DOMã€‚ ä¸¤ä¸ªå‚æ•°åˆ†åˆ«æŒ‡å‘æ›´æ–°å‰çš„propså’Œstate

4.ç»„ä»¶å¸è½½é˜¶æ®µ
>è¯¥é˜¶æ®µåªæœ‰ä¸€ä¸ªç”Ÿå‘½å‘¨æœŸï¼ŒcomponentWillUnmount

* componentWillUnmount,åœ¨ç»„ä»¶å¸è½½å‰è¢«è°ƒç”¨ï¼Œå¯ä»¥åœ¨è¿™é‡Œæ‰§è¡Œä¸€äº›æ¸…ç†å·¥ä½œ

React hooksä¸ä¹‹å‰å¯¹æ¯”

* constructor==useState
* getDerivedStateFromProps ==useStateé‡Œçš„updateå‡½æ•°
* shouldComponentUpdate==useMemo
* render==å‡½æ•°æœ¬èº« 
* componentDidMount==useEffect
* componentDidUpdate==useEffect
* componentWillUnmount==useEffecté‡Œé¢è¿”å›çš„å‡½æ•°