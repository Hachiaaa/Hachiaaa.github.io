---
layout: post
title: "pythonçˆ¬è™«è§£æåº“"
date: 2020-06-10
sitemap: false
keywords: "blog"
description: "ğŸš€"
---

xpathå’ŒBeautifulSoupä»‹ç»

## xpathå’Œlxmlåº“
1.é€šè¿‡lxmlçš„etreeæ¨¡å—æ„é€ xpathè§£æå¯¹è±¡`etree.HTML()`  
2.xpathå¸¸ç”¨è§„åˆ™  
* nodename é€‰å–æ­¤èŠ‚ç‚¹çš„æ‰€æœ‰å­èŠ‚ç‚¹  
* / ä»å½“å‰èŠ‚ç‚¹é€‰æ‹©ç›´æ¥å­èŠ‚ç‚¹
* // ä»å½“å‰èŠ‚ç‚¹é€‰å–å­å­™èŠ‚ç‚¹
* .. é€‰å–å½“å‰èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹
* @ é€‰å–å±æ€§

3.ä¸€äº›å®ä¾‹   
* `//li[@class='fuck']` è¿”å›æ‰€æœ‰classä¸ºfuckçš„lièŠ‚ç‚¹  
* `//li[@class='fuck']//text()`  è¿”å›æ‰€æœ‰liå­å­™èŠ‚ç‚¹å†…éƒ¨çš„æ‰€æœ‰æ–‡æœ¬ï¼Œå¯èƒ½ä¼šå¤¹æ‚ä¸€äº›ç‰¹æ®Šç¬¦å·å¦‚æ¢è¡Œç¬¦ç­‰  
* `//li/a/@href`è¿”å›æ‰€æœ‰lièŠ‚ç‚¹ä¸‹æ‰€æœ‰aèŠ‚ç‚¹çš„hrefå±æ€§  
* å±æ€§å¤šå€¼åŒ¹é…ï¼Œcontainså‡½æ•°ã€‚`//li[contains(@class,'fuck')]/a/text()`  
* å¤šå±æ€§åŒ¹é…ï¼Œé€»è¾‘è¿ç®—ç¬¦ã€‚`//li[contains(@class,'fuck') and @name='guoqi']/a/text()`  
* æŒ‰åºé€‰æ‹©ï¼Œ`//li[1]/a/text()`,`//li[position()<3]/a/text()`  
* èŠ‚ç‚¹è½´çš„é€‰æ‹©ï¼Œ`//li[1]/ancestor::*` , `//li[1]/attribute::*` , `//li[1]/descendant::span`ã€‚ ç¬¬ä¸€ä¸ªè¡¨ç¤ºç¬¬ä¸€ä¸ªlièŠ‚ç‚¹çš„æ‰€æœ‰ç¥–å…ˆèŠ‚ç‚¹ï¼Œç¬¬äºŒä¸ªè¡¨ç¤ºç¬¬ä¸€ä¸ªlièŠ‚ç‚¹çš„æ‰€æœ‰å±æ€§ï¼Œç¬¬ä¸‰ä¸ªè¡¨ç¤ºç¬¬ä¸€ä¸ªlièŠ‚ç‚¹çš„æ‰€æœ‰spanå­å­™èŠ‚ç‚¹ã€‚

## Beautiful Soup  
1.beautiful soupåœ¨è§£ææ—¶ä¾èµ–è§£æå™¨ï¼Œé™¤äº†pythonæ ‡å‡†åº“ä¸­å†…ç½®çš„HTMLè§£æå™¨å¤–ï¼Œæœ€å¸¸ç”¨çš„æ˜¯lxmlï¼Œå¯ä»¥è§£æHTMLå’ŒXMLã€‚é€šè¿‡`soup=BeautifulSoup(markup,'lxml')`æ„é€ ä¸€ä¸ªå®ä¾‹ã€‚  
2.åŸºæœ¬ç”¨æ³•  
* èŠ‚ç‚¹é€‰æ‹©å™¨ï¼Œç›´æ¥è°ƒç”¨èŠ‚ç‚¹åç§°ï¼Œè¿”å›bs4.element.Tagç±»å‹ï¼Œ`soup.p`é€‰æ‹©æ‰€æœ‰pèŠ‚ç‚¹ï¼Œå†è°ƒç”¨stringå±æ€§å°±å¯ä»¥è·å¾—èŠ‚ç‚¹çš„æ–‡æœ¬ï¼Œè°ƒç”¨attrså±æ€§å¯ä»¥è·å¾—èŠ‚ç‚¹çš„æ‰€æœ‰å±æ€§åˆ—è¡¨ã€‚  
* åµŒå¥—é€‰æ‹©ï¼Œbs4.element.Tagç±»å‹å¯ä»¥ç»§ç»­ç›´æ¥è°ƒç”¨èŠ‚ç‚¹é€‰æ‹©å™¨ã€‚  
* å…³è”é€‰æ‹©ï¼Œå¯ä»¥è°ƒç”¨contentsè·å–èŠ‚ç‚¹å…ƒç´ çš„ç›´æ¥å­èŠ‚ç‚¹,è¿”å›åˆ—è¡¨ï¼›å¦‚æœè°ƒç”¨childrenå±æ€§ï¼Œè¿”å›åŒæ ·çš„ç»“æœï¼Œä¸è¿‡è¿”å›ç±»å‹æ˜¯ä¸€ä¸ªç”Ÿæˆå™¨ã€‚å¦‚æœè¦è·å–å­å­™èŠ‚ç‚¹çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨descendantså±æ€§ï¼Œè¿”å›ç±»å‹ä¹Ÿæ˜¯ä¸€ä¸ªç”Ÿæˆå™¨ã€‚
* çˆ¶èŠ‚ç‚¹å’Œç¥–å…ˆèŠ‚ç‚¹ï¼Œparentå’Œparentsã€‚
* å…„å¼ŸèŠ‚ç‚¹ï¼Œnext_siblingå’Œnext_siblings;previous_siblingå’Œprevious_siblingsã€‚  

3.æ–¹æ³•é€‰æ‹©å™¨  
* `find_all(name,attrs,recursive,text,**kwargs)`,æŸ¥è¯¢æ‰€æœ‰ç¬¦åˆæ¡ä»¶çš„å…ƒç´ ã€‚nameå±æ€§ç›´æ¥ä¼ é€’å­—ç¬¦ä¸²ï¼Œattrså±æ€§ä¼ é€’ä¸€ä¸ªå­—å…¸ï¼Œtextå‚æ•°ç”¨æ¥åŒ¹é…èŠ‚ç‚¹çš„æ–‡æœ¬ï¼Œä¼ å…¥çš„å½¢å¼å¯ä»¥æ˜¯å­—ç¬¦ä¸²æˆ–è€…æ­£åˆ™è¡¨è¾¾å¼å¯¹è±¡ã€‚  
* `find()`,è·Ÿfind_allç±»ä¼¼ï¼Œä¸è¿‡è¿”å›çš„æ˜¯ç¬¬ä¸€ä¸ªåŒ¹é…çš„èŠ‚ç‚¹ã€‚  
* `select()`,cssé€‰æ‹©å™¨ã€‚