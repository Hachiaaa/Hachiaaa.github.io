---
layout: post
title: "æ·±å…¥bindå’Œnew"
date: 2020-04-10
sitemap: false
keywords: "blog"
description: "ğŸš€"
---

jsä¸­çš„newå’Œbind

## newæ“ä½œç¬¦
> 1.åˆ›å»ºäº†ä¸€ä¸ªæ–°å¯¹è±¡obj  
> 2.å°†æ–°å¯¹è±¡çš„__proto__æŒ‡å‘æ„é€ å‡½æ•°çš„åŸå‹  
> 3.å°†æ„é€ å‡½æ•°ä¸­çš„thisç»‘å®šåˆ°obj  
> 4.å¦‚æœæ„é€ å‡½æ•°è¿”å›çš„æ˜¯å¯¹è±¡ï¼Œåˆ™ç›´æ¥è¿”å›è¯¥å¯¹è±¡ï¼›å¦‚æœè¿”å›çš„ä¸æ˜¯å¯¹è±¡åˆ™å¿½ç•¥è¿”å›å€¼ï¼Œè¿”å›obj

```javascript
function ObjectFactory(){
    let obj={}
    let Constructor=[...arguments][0]
    let args=[...arguments].slice(1)
    obj.__proto__=Constructor.prototype
    let result=Constructor.apply(obj,args)
    return typeof result==='object'?result:obj
}
```

## bindç»‘å®š
> 1.å°†ä¸€ä¸ªå‡½æ•°ä¸­çš„thisç»‘å®šåˆ°æŒ‡å®šå¯¹è±¡ä¸Šï¼Œè¿”å›ä¸€ä¸ªå‡½æ•°  
> 2.å‚æ•°å¯ä»¥åœ¨ç»‘å®šæ—¶ä¼ ï¼Œä¹Ÿå¯ä»¥åœ¨è¿”å›çš„å‡½æ•°ä¸­ä¼ ï¼Œä¹Ÿå¯ä»¥åœ¨ä¸¤è€…ä¸­éƒ½ä¼ é€’ä¸€éƒ¨åˆ†  
> 3.è¿”å›çš„å‡½æ•°åŒæ ·å¯ä»¥ç”¨ä½œæ„é€ å‡½æ•°ï¼Œè¿™ä¸ªæ—¶å€™å›å¿½ç•¥é‡Œé¢çš„thisç»‘å®š  

```javascript
Function.prototype.mybind=function(obj){
    let self=this
    let outerargs=[...arguments].slice(1)
    let fbind=function(){
        let innerargs=[...arguments]
        //å¦‚æœæ˜¯æ„é€ å‡½æ•°ï¼ŒthisæŒ‡å‘å®ä¾‹ï¼ŒselfæŒ‡å‘ç»‘å®šå‡½æ•°
        //å¦‚æœæ˜¯æ™®é€šå‡½æ•°ï¼ŒthisæŒ‡å‘windowï¼ŒselfæŒ‡å‘ç»‘å®šå‡½æ•°
        self.apply(this instanceof self?this:obj,outerargs.concat(innerargs))
    }
    //å½“fbindä¸ºæ„é€ å‡½æ•°æ—¶ï¼Œä½¿å…¶å®ä¾‹çš„åŸå‹é“¾ä¸Šæœ‰this.prototype;åˆ™ä¸Šé¢çš„this instanceof selfè¿”å›true
    function F(){}
    F.prototype=this.prototype
    fbind.prototype=new F()
    return fbind()
}
```