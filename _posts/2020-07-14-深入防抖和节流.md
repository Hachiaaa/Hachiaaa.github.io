---
layout: post
title: "æ·±å…¥é˜²æŠ–å’ŒèŠ‚æµ"
date: 2020-07-14
sitemap: false
keywords: "blog"
description: "ğŸš€"
---

debounceå’Œthrottle

## é˜²æŠ–
> 1.å½“æŸä¸ªäº‹ä»¶é¢‘ç¹è§¦å‘æ—¶ï¼Œç»´æŠ¤ä¸€ä¸ªå®šæ—¶å™¨ï¼Œåªè®©å…¶åœ¨è§„å®šå»¶è¿Ÿåè§¦å‘ï¼Œå¦‚æœåœ¨è§„å®šæ—¶é—´å†…åœ¨æ­¤å‘ç”Ÿäº‹ä»¶ï¼Œåˆ™ä»¥æ–°çš„æ—¶é—´èŠ‚ç‚¹ä¸ºå‡†  
> 2.æ³¨æ„thisæŒ‡å‘  
> 3.é»˜è®¤ä¼šä¼ é€’äº‹ä»¶å¯¹è±¡event  
> 4.åˆ†ä¸ºç«‹åˆ»æ‰§è¡Œç‰ˆæœ¬å’Œéç«‹åˆ»æ‰§è¡Œç‰ˆæœ¬  
> 5.è¿”å›å€¼çš„é—®é¢˜  

```javascript
function debounce(fnc,wait,immediate){
    let timeout,result,args
    return function(){
        // æ¥å—eventå¯¹è±¡
        args=[...arguments].slice(0)
        // åœ¨å¤–å±‚æ¥å—thisæŒ‡é’ˆ
        let context=this
        if(timeout){
            clearTimeout(timeout)}
        if(immediate){
            let callnow=!timeout
            timeout=setTimeout(()=>{
                timeout=null
            },wait)
            if(callnow){
                // åªå¤„ç†ç«‹å³æ‰§è¡Œç‰ˆæœ¬çš„è¿”å›å€¼ï¼Œå› ä¸ºéç«‹å³æ‰§è¡Œç‰ˆæœ¬è¿”å›å€¼åœ¨ä¸€ä¸ªå®šæ—¶å™¨é‡Œ
                result=fnc.apply(context,args)
            }
        }
        else{
            timeout=setTimeout(()=>{
                fnc.apply(context,args)
            },wait)
        }
        return result
    }
}
```

## èŠ‚æµ
> 1.å½“é¢‘ç¹è§¦å‘äº‹ä»¶æ—¶ï¼Œä¿æŒæ¯éš”ä¸€æ®µæ—¶é—´åªè§¦å‘ä¸€æ¬¡  
> 2.thisæŒ‡å‘é—®é¢˜  
> 3.eventä¼ é€’  
> 4.åˆ†ä¸ºå®šæ—¶å™¨ç‰ˆæœ¬å’Œæ—¶é—´æˆ³ç‰ˆæœ¬  
> 5.è¿”å›å€¼é—®é¢˜  

```javascript
//æ—¶é—´æˆ³ç‰ˆæœ¬ï¼Œç¬¬ä¸€æ¬¡ä¼šç«‹å³æ‰§è¡Œ
function throttle(func,wait){
    let args,previous=0
    return function(){
        args=[...arguments].slice(0)
        let now= +new Date()
        if(now-previous>=wait){
            func.apply(this,args)
            previous=now
        }
    }
}

//å®šæ—¶å™¨ç‰ˆæœ¬ï¼Œæœ€åä¸€æ¬¡ä¼šå»¶åæ‰§è¡Œ
function throttle(func,wait){
    let args,timeout=null
    return function(){
        args=[...arguments].slice(0)
        timeout=setTimeout(()=>{
            //ä½¿ç”¨ç®­å¤´å‡½æ•°ä¿è¯thisæŒ‡å‘æ­£ç¡®
            func.apply(this,args)
            timeout=null
        })
    }
}
```
