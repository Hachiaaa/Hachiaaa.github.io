DNS协议梳理

## 概况
DNS协议提供的是一种主机名到IP地址的转换服务，定义了主机如何查询由分层的DNS服务器组成的分布式数据库的协议。基于UDP协议，使用53号端口。

## 域名层级结构
```
主机名.次级域名.顶级域名.根域名
```
根据域名不同层级结构可以分为，根域名服务器，顶级域名服务器，权威域名服务器。

## 查询过程
DNS查询过程一般为，我们首先将DNS请求发送到本地DNS服务器，由本地DNS服务器来代为请求。
1. 从"根域名服务器"查到"顶级域名服务器"的 NS 记录和 A 记录（ IP 地址）。  
2. 从"顶级域名服务器"查到"次级域名服务器"的 NS 记录和 A 记录（ IP 地址）。  
3. 从"次级域名服务器"查出"主机名"的 IP 地址。

> 比如我们如果想要查询`www.baidu.com`的 IP 地址，我们首先会将请求发送到本地的 DNS 服务器中，本地 DNS 服务 器会判断是否存在该域名的缓存，如果不存在，则向根域名服务器发送一个请求，根域名服务器返回负责 .com 的顶级域名 服务器的 IP 地址的列表。然后本地 DNS 服务器再向其中一个负责 .com 的顶级域名服务器发送一个请求，负责 .com 的顶级域名服务器返回负责 .baidu 的权威域名服务器的 IP 地址列表。然后本地 DNS 服务器再向其中一个权威域名服 务器发送一个请求，最后权威域名服务器返回一个对应的主机名的 IP 地址列表。
